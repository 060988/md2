{"version":3,"sources":["dialog/dialog.ts"],"names":[],"mappings":"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","file":"dialog.js","sourcesContent":["import {\n  Component,\n  Output,\n  Input,\n  EventEmitter,\n  ViewChild,\n  ViewEncapsulation,\n  OnDestroy,\n  Directive,\n  ViewContainerRef,\n  TemplateRef,\n  NgModule,\n  ModuleWithProviders\n} from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport {\n  Overlay,\n  OVERLAY_PROVIDERS,\n  OverlayState,\n  OverlayRef,\n  TemplatePortal\n} from '../core/core';\nimport { Animate } from './animate';\n\n@Directive({ selector: '[md2DialogPortal]' })\nexport class Md2DialogPortal extends TemplatePortal {\n  constructor(templateRef: TemplateRef<any>, viewContainerRef: ViewContainerRef) {\n    super(templateRef, viewContainerRef);\n  }\n}\n\n@Directive({ selector: 'md2-dialog-title' })\nexport class Md2DialogTitle { }\n\n@Directive({ selector: 'md2-dialog-footer' })\nexport class Md2DialogFooter { }\n\n@Component({\n  moduleId: module.id,\n  selector: 'md2-dialog',\n  templateUrl: 'dialog.html',\n  styleUrls: ['dialog.css'],\n  host: {\n    'tabindex': '0',\n    '(body:keydown)': '_handleDocumentKeydown($event)'\n  },\n  encapsulation: ViewEncapsulation.None,\n})\nexport class Md2Dialog implements OnDestroy {\n  constructor(private _overlay: Overlay) { }\n\n  @Output() onShow: EventEmitter<Md2Dialog> = new EventEmitter<Md2Dialog>();\n  @Output() onClose: EventEmitter<any> = new EventEmitter<any>();\n  @Output() onCancel: EventEmitter<any> = new EventEmitter<any>();\n\n  /** The portal to send the dialog content through */\n  @ViewChild(Md2DialogPortal) _portal: Md2DialogPortal;\n\n  /** Is the dialog active? */\n  _isOpened: boolean = false;\n\n  @Input('title') dialogTitle: string;\n\n  /** Overlay configuration for positioning the dialog */\n  @Input() config = new OverlayState();\n\n  /** @internal */\n  private _overlayRef: OverlayRef = null;\n\n  ngOnDestroy(): any {\n    return this.close();\n  }\n\n  /** Show the dialog */\n  show(): Promise<Md2Dialog> {\n    return this.open();\n  }\n\n  /** Open the dialog */\n  open(): Promise<Md2Dialog> {\n    return this.close()\n      .then(() => this._overlay.create(this.config))\n      .then((ref: OverlayRef) => {\n        this._overlayRef = ref;\n        return ref.attach(this._portal);\n      })\n      .then(() => Animate.wait())\n      .then(() => {\n        this._isOpened = true;\n        this.onShow.emit(this);\n        return this;\n      });\n  }\n\n  /** Close the dialog */\n  close(result: any = true, cancel: boolean = false): Promise<Md2Dialog> {\n    if (!this._overlayRef) {\n      return Promise.resolve<Md2Dialog>(this);\n    }\n    this._isOpened = false;\n    // TODO(jd): this is terrible, use animate states\n    return Animate.wait(100)\n      .then(() => this._overlayRef.detach())\n      .then(() => {\n        this._overlayRef.dispose();\n        this._overlayRef = null;\n        if (cancel) {\n          this.onCancel.emit(result);\n        } else {\n          this.onClose.emit(result);\n        }\n        return this;\n      });\n  }\n\n  _handleDocumentKeydown(event: KeyboardEvent) {\n    if (event.keyCode == 27) {\n      this.close();\n    }\n  }\n}\n\nexport const MD2_DIALOG_DIRECTIVES: any[] = [Md2Dialog, Md2DialogTitle, Md2DialogFooter, Md2DialogPortal];\n\nexport const MD2_DIALOG_PROVIDERS: any[] = [Overlay, OVERLAY_PROVIDERS];\n\n@NgModule({\n  imports: [CommonModule],\n  exports: MD2_DIALOG_DIRECTIVES,\n  declarations: MD2_DIALOG_DIRECTIVES,\n})\nexport class Md2DialogModule {\n  static forRoot(): ModuleWithProviders {\n    return {\n      ngModule: Md2DialogModule,\n      providers: MD2_DIALOG_PROVIDERS\n    };\n  }\n}\n"]}